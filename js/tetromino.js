/**
 * tetromino.js
 * -----------------------------
 * 테트리스 테트로미노 정의 및 생성 관리
 * - 테트로미노 모양 데이터 정의
 * - 랜덤 테트로미노 생성
 * - 초기 스폰 위치 제공
 */

/* ===============================
   테트로미노 타입 정의
   =============================== */

// 각 테트로미노의 회전 기준 형태 (0도 기준)
// 숫자 값은 색상 및 렌더링 식별용
const TETROMINO_SHAPES = {
  I: [
    [0, 0, 0, 0],
    [1, 1, 1, 1],
    [0, 0, 0, 0],
    [0, 0, 0, 0],
  ],

  O: [
    [2, 2],
    [2, 2],
  ],

  T: [
    [0, 3, 0],
    [3, 3, 3],
    [0, 0, 0],
  ],

  S: [
    [0, 4, 4],
    [4, 4, 0],
    [0, 0, 0],
  ],

  Z: [
    [5, 5, 0],
    [0, 5, 5],
    [0, 0, 0],
  ],

  J: [
    [6, 0, 0],
    [6, 6, 6],
    [0, 0, 0],
  ],

  L: [
    [0, 0, 7],
    [7, 7, 7],
    [0, 0, 0],
  ],
};


/* ===============================
   테트로미노 키 목록
   =============================== */

// 랜덤 선택을 위한 테트로미노 키 배열
const TETROMINO_KEYS = Object.keys(TETROMINO_SHAPES);


/* ===============================
   테트로미노 생성 함수
   =============================== */

/**
 * 랜덤 테트로미노 생성
 * @returns {Object} 테트로미노 객체
 */
function createTetromino() {
  // 랜덤 키 선택
  const randomKey =
    TETROMINO_KEYS[
      Math.floor(Math.random() * TETROMINO_KEYS.length)
    ];

  // 선택된 테트로미노 모양
  const shape = TETROMINO_SHAPES[randomKey];

  return {
    type: randomKey,     // 테트로미노 타입 (I, O, T ...)
    matrix: shape,       // 블록 형태 배열
    x: 3,                // 보드 상 스폰 X 위치 (중앙 근처)
    y: 0,                // 보드 상 스폰 Y 위치
  };
}

